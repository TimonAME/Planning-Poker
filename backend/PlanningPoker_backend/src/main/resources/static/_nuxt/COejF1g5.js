import{b as y,u as f,a as g,r as v,m as S,d as x,_ as $}from"./NqBGIZ0X.js";import{a1 as w,o as L,r as T,v as l,M as u,z as C,x as e,Q as N,$ as H,O as n,a2 as M,P as D,S as c,T as O,t as i,y as U,ac as V}from"./BXIb45Ev.js";import{a as j}from"./DR1J6V2K.js";import"https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js";const k={id:"my_modal_7",class:"modal"},B={class:"modal-box"},z=e("h3",{class:"font-bold text-lg mb-1"},"Username",-1),A={class:"form-control w-full"},P={class:"error-msg text-sm ml-1 mt-1 text-red-600"},R=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"btn btn-primary mt-2"}," Submit ")],-1),G={__name:"username-input",setup(q){const d=w();L(()=>{my_modal_7.showModal()});const o=T(""),p={username:{required:v,minLength:S(1),maxLength:x(20)}},t=y(p,{username:o}),b=f(),s=g(),h=()=>{t.value.$touch(),t.value.$error||(console.log("hallllo"),fetch("http://localhost:8080/create",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({lobbyHash:s.lobbyHash,userHash:s.userHash,lobbyDescription:s.description,lobbyName:s.name,lobbyCardType:s.votingSystemName})}).then(a=>a.json()).then(a=>{console.log(a),console.log("createLobby called"),j().activateStompClient(s.lobbyHash),d.push("/prelobby"),b.addUser(o.value,"not ready",!0),my_modal_7.close()}))};return(a,m)=>{const _=$;return i(),l(c,null,[u(C(_,null,null,512),[[V,!1]]),e("dialog",k,[e("div",B,[z,e("form",{onSubmit:N(h,["prevent"])},[e("label",A,[e("div",{class:H({error:n(t).username.$errors.length})},[u(e("input",{type:"text",placeholder:"Type here",class:"input input-bordered w-full","onUpdate:modelValue":m[0]||(m[0]=r=>D(o)?o.value=r:null)},null,512),[[M,n(o)]]),(i(!0),l(c,null,O(n(t).username.$errors,r=>(i(),l("div",{class:"input-errors",key:r.$uid},[e("div",P,U(r.$message),1)]))),128))],2)]),R],32)])])],64)}}};export{G as default};
