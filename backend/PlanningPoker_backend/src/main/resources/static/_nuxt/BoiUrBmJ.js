import{a7 as n}from"./qmWXUeWf.js";import"https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js";const r=n("stompClient",{state:()=>({stompClient:null}),actions:{activateStompClient(e){this.stompClient=new StompJs.Client({brokerURL:"ws://localhost:8080/ws-endpoint"}),console.log("activatestompclient"),this.stompClient.onConnect=o=>{console.log("Connected:",o),this.stompClient.subscribe(`/topic/lobby/${e}`,s=>{console.log("Nachricht bekommen:------------------------------------------------");let t=JSON.parse(s.body);switch(console.log(s),console.log(t.type),t.type){case"lobbyJoinBroadCast":console.log("someone joined");break;case"userStoryBroadcast":console.log("Userstory erstellt"),console.log(t);break}})},this.stompClient.onStompError=o=>{console.error("Broker reported error:",o.headers.message),console.error("Additional details:",o.body)},this.stompClient.onWebSocketError=o=>{console.error("WebSocket error:",o)},this.stompClient.onDisconnect=o=>{console.log("Disconnected:",o)},this.stompClient.activate()},publishMessage(e,o){console.log("Trying to publish"),console.log(this.stompClient),this.stompClient.publish({destination:e,body:o})}},persist:!0});export{r as u};
